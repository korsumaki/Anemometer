<!DOCTYPE html>
<html>
<body>

<h1>Anemometer</h1>
<p>Fly a circle with constant airspeed</p>

<button onclick="getLocation()">Clear and Start again</button>

<p id="demo"></p>

<script>
	var x = document.getElementById("demo");
	var updateCounter = 0;

	function getLocation() {
		updateCounter = 0;
		if (navigator.geolocation) {
			//navigator.geolocation.getCurrentPosition(showPosition, showError);
			navigator.geolocation.watchPosition(showPosition, showError);
		} else { 
			x.innerHTML = "Geolocation is not supported by this browser.";
		}
	}

	function showPosition(position) {
		updateCounter++;
		x.innerHTML = "Latitude: " + position.coords.latitude + 
			"<br>Longitude: " + position.coords.longitude +
			"<br>speed: " + position.coords.speed + " m/s" + 
			"<br>heading: " + position.coords.heading + " degrees" +
			"<br>updates: " + updateCounter;
	}

	function showError(error) {
		switch(error.code) {
			case error.PERMISSION_DENIED:
				x.innerHTML = "User denied the request for Geolocation."
				break;
			case error.POSITION_UNAVAILABLE:
				x.innerHTML = "Location information is unavailable."
				break;
			case error.TIMEOUT:
				x.innerHTML = "The request to get user location timed out."
				break;
			case error.UNKNOWN_ERROR:
				x.innerHTML = "An unknown error occurred."
				break;
		}
	}
</script>

</body>
</html>
